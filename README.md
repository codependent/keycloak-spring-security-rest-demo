# keycloak-spring-security-rest-demo

It's necessary to get a token from the Auth server in order to invoke this service:

    curl -X POST \
        -H "Authorization: Basic c2ItYXBwOmEyY2ViZmI2LTBjMzgtNDNiNS1hMDAwLThhYmUzYjU5YjJiMQ==" \
        -H "Content-Type: application/x-www-form-urlencoded" \
        -d 'username=jainigo&password=jainigo&grant_type=password' \
        "http://localhost:8180/auth/realms/SampleRealm/protocol/openid-connect/token"

Response example:
```
{"access_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJnUm15c0lkSG9wS0dENDU5LW1iNlg1blpYa0xrMUwyVUliRm9DNDN3X3U4In0.eyJqdGkiOiJmNWE5MDFjZi01MzdkLTQ2ZmItODUwOS1jMDMwMTI2ZmQ5NjIiLCJleHAiOjE1MTY1NzU4NzEsIm5iZiI6MCwiaWF0IjoxNTE2NTc1NTcxLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgxODAvYXV0aC9yZWFsbXMvU2FtcGxlUmVhbG0iLCJhdWQiOiJzYi1hcHAiLCJzdWIiOiJmZDQwZjZjYS1mMjFjLTQ5NjUtOGQzNy0zNGIyODA2MGRjNmIiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJzYi1hcHAiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIzMDBiNDE0Yi1jODQ3LTRmNTYtYTc5Ny1iMzUyYTBkZWRmNTMiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInVtYV9hdXRob3JpemF0aW9uIiwidXNlciJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInByZWZlcnJlZF91c2VybmFtZSI6ImphaW5pZ28ifQ.jXIQiIHBMJbId3xbUEMauXDkT4XPBh787LecP5K0JerwyBKbHWUpu6Jz2Rh5NSiWr04LSUH8Cecjrr__XC4nMPMEzI_CiKCCYNZM97J4M-sDw_519LoMUweEuW2fCniyA9asVE_FLjWtrXLAIPgBBfhsuC4Cc433EFoKXywgvC01jHqHqfzmYA3HgyfRjXN3vly_F1fS_5f-2Mol6dxzKHPPoI2699kx-t1HSqAjgthZ4N5WpNk-AWl09GX8dxqPO52-7KKdB49k7URkiIYFaBMTva4woJJoBzyJOQJlYBEjBNAwemRJODShUvUa845hp1akDkFIrv1V9w15z8MSww","expires_in":300,"refresh_expires_in":1800,"refresh_token":"eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJnUm15c0lkSG9wS0dENDU5LW1iNlg1blpYa0xrMUwyVUliRm9DNDN3X3U4In0.eyJqdGkiOiI5N2Q0NDQ1OC1hZGE1LTRlOTUtYTZmMi1lNTk2ZTEwODViYTEiLCJleHAiOjE1MTY1NzczNzEsIm5iZiI6MCwiaWF0IjoxNTE2NTc1NTcxLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgxODAvYXV0aC9yZWFsbXMvU2FtcGxlUmVhbG0iLCJhdWQiOiJzYi1hcHAiLCJzdWIiOiJmZDQwZjZjYS1mMjFjLTQ5NjUtOGQzNy0zNGIyODA2MGRjNmIiLCJ0eXAiOiJSZWZyZXNoIiwiYXpwIjoic2ItYXBwIiwiYXV0aF90aW1lIjowLCJzZXNzaW9uX3N0YXRlIjoiMzAwYjQxNGItYzg0Ny00ZjU2LWE3OTctYjM1MmEwZGVkZjUzIiwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInVtYV9hdXRob3JpemF0aW9uIiwidXNlciJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX19.NyKfQiEmpinbpffPk4rZ48I9JcXBbpLfxSuw5Gt6MxtDzobZ-WOaofc132Ln7vmjUwzLma89i7WrUKrT0SBaO74OVBOVZQL7upUuqRb880zgzhYyaTTCQ9SyYKob-Ctz4IG4U92UZJMyruEIJ5ZAn4g8tBNdS2eVwZqTbGd-8uzTxv4olyQV0c6qfzqw1phlmnkdRPkKpxanA4kGmhhySAYfyKu5id1HrXBsrFBzTwHD0xwdq-isnk7VQ2ei_Ozmp-urseFY9_HNDCSLeoNx-MCghjyKA20vuGojDaknMimTJJaBQMLyOdcXFuQwvt1HaiHQ1r0qWg1paCeNEY1o3w","token_type":"bearer","not-before-policy":0,"session_state":"300b414b-c847-4f56-a797-b352a0dedf53"}
```

Then use the access_token to invoke the REST endpoint:

```curl http://localhost:9292/me -H "Authorization: bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJnUm15c0lkSG9wS0dENDU5LW1iNlg1blpYa0xrMUwyVUliRm9DNDN3X3U4In0.eyJqdGkiOiJmNWE5MDFjZi01MzdkLTQ2ZmItODUwOS1jMDMwMTI2ZmQ5NjIiLCJleHAiOjE1MTY1NzU4NzEsIm5iZiI6MCwiaWF0IjoxNTE2NTc1NTcxLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgxODAvYXV0aC9yZWFsbXMvU2FtcGxlUmVhbG0iLCJhdWQiOiJzYi1hcHAiLCJzdWIiOiJmZDQwZjZjYS1mMjFjLTQ5NjUtOGQzNy0zNGIyODA2MGRjNmIiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJzYi1hcHAiLCJhdXRoX3RpbWUiOjAsInNlc3Npb25fc3RhdGUiOiIzMDBiNDE0Yi1jODQ3LTRmNTYtYTc5Ny1iMzUyYTBkZWRmNTMiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInVtYV9hdXRob3JpemF0aW9uIiwidXNlciJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInByZWZlcnJlZF91c2VybmFtZSI6ImphaW5pZ28ifQ.jXIQiIHBMJbId3xbUEMauXDkT4XPBh787LecP5K0JerwyBKbHWUpu6Jz2Rh5NSiWr04LSUH8Cecjrr__XC4nMPMEzI_CiKCCYNZM97J4M-sDw_519LoMUweEuW2fCniyA9asVE_FLjWtrXLAIPgBBfhsuC4Cc433EFoKXywgvC01jHqHqfzmYA3HgyfRjXN3vly_F1fS_5f-2Mol6dxzKHPPoI2699kx-t1HSqAjgthZ4N5WpNk-AWl09GX8dxqPO52-7KKdB49k7URkiIYFaBMTva4woJJoBzyJOQJlYBEjBNAwemRJODShUvUa845hp1akDkFIrv1V9w15z8MSww"```
